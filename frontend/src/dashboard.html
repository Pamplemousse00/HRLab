<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>HRLab Dashboard</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.1/css/bulma.min.css">
    <script src="auth.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.min.js" defer></script>
    <script src="rateChart.js" defer></script>
  </head>
  <body>
    <nav class="navbar" role="navigation" aria-label="main navigation">
      <div class="navbar-brand">
        <a class="navbar-item" href="./dashboard.html">
          <img src="https://bulma.io/images/bulma-logo.png" width="112" height="28">
        </a>
    
        <a role="button" class="navbar-burger burger" aria-label="menu" aria-expanded="false" data-target="navbarBasicExample">
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
        </a>
      </div>
    
      <div id="navbarBasicExample" class="navbar-menu">
        <div class="navbar-start">
          <a class="navbar-item">
            Dashboard
          </a>
    
          <a class="navbar-item" onclick="openAboutModal()">
            About
          </a>
          
          <a class="navbar-item" onclick="logout()">
            Logout
          </a>

          <div class="navbar-item" id="navbarName">
            Not Logged in
          </div>
          
        </div>
      </div>
    </nav>
  <section class="section">
    <div class="container">
      <div class="tabs is-medium is-boxed">
        <ul>
          <li onclick="setMode('AOO')" id="AOO" class="is-active"><a>AOO</a></li>
          <li onclick="setMode('VOO')" id="VOO"><a>VOO</a></li>
          <li onclick="setMode('AAI')" id="AAI"><a>AAI</a></li>
          <li onclick="setMode('VVI')" id="VVI"><a>VVI</a></li>
          <li onclick="setMode('VOOR')" id="VOOR"><a>VOOR</a></li>
          <li onclick="setMode('DDDR')" id="DDDR"><a>DDDR</a></li>
        </ul>
      </div>
      <div style="width: 50%; height: 800px; display: inline-block;">
        <canvas id="rateChart"></canvas>
      </div>
      <div style="display: inline-block;">
        <iframe src="./dashboardViews/AOO.html" seamless style="height: 800px; width: 200%;" scrolling="no" id="AOOFrame"></iframe>
        <iframe src="./dashboardViews/VOO.html" seamless style="height: 800px; width: 200%;" scrolling="no" id="VOOFrame" hidden></iframe>
        <iframe src="./dashboardViews/AAI.html" seamless style="height: 800px; width: 200%;" scrolling="no" id="AAIFrame" hidden></iframe>
        <iframe src="./dashboardViews/VVI.html" seamless style="height: 800px; width: 200%;" scrolling="no" id="VVIFrame" hidden></iframe>
        <iframe src="./dashboardViews/VOOR.html" seamless style="height: 800px; width: 200%;" scrolling="no" id="VOORFrame" hidden></iframe>
        <iframe src="./dashboardViews/DDDR.html" seamless style="height: 800px; width: 200%;" scrolling="no" id="DDDRFrame" hidden></iframe>
      </div>
    </div>
  </section>
  <div class="modal" id="aboutModal">
    <div class="modal-background" onclick="closeAboutModal()"></div>
    <div class="modal-card">
      <header class="modal-card-head">
        <p class="modal-card-title">About This Software</p>
        <button class="delete" aria-label="close" onclick="closeAboutModal()"></button>
      </header>
      <section class="modal-card-body">
        Version: Alpha V0.1<br>
        Revision: 1<br>
        DCM Serial Number: XXXXXX<br>
        Institution Name: McMaster University
      </section>
      <footer class="modal-card-foot">
        <button class="button is-success" onclick="closeAboutModal()">Return</button>
      </footer>
    </div>
  </div>
  </body>
</html>

<script>
  if(getCurrentUser().username == undefined) {
    window.location.href = './login.html';
  }
  document.getElementById('navbarName').innerHTML = getCurrentUser().fullName;

  function closeAboutModal() {
    document.getElementById('aboutModal').classList.remove('is-active');
  }
  function openAboutModal() {
    document.getElementById('aboutModal').classList.add('is-active');
  }
  function setMode(mode) {
    document.getElementById('AOO').classList.remove('is-active')
    document.getElementById('VOO').classList.remove('is-active')
    document.getElementById('AAI').classList.remove('is-active')
    document.getElementById('VVI').classList.remove('is-active')
    document.getElementById('VOOR').classList.remove('is-active')
    document.getElementById('DDDR').classList.remove('is-active')
    document.getElementById(mode).classList.add('is-active');

    document.getElementById('AOOFrame').hidden = true;
    document.getElementById('VOOFrame').hidden = true;
    document.getElementById('AAIFrame').hidden = true;
    document.getElementById('VVIFrame').hidden = true;
    document.getElementById('VOORFrame').hidden = true;
    document.getElementById('DDDRFrame').hidden = true;
    var frame = document.getElementById(mode + 'Frame');
    frame.hidden = false;
    switch (mode) {
      case 'AAI':
        console.log('AAI');
        break;
    }
  }
</script>